# Writeup: Flag Art Challenge

## **Challenge Overview**
We are given a webpage that displays a message and a bookmarklet containing an encrypted flag. Our goal is to decrypt the flag and retrieve the correct answer.

## **Understanding the Bookmarklet**
The provided JavaScript bookmarklet contains an encrypted string and a decryption algorithm:

```javascript
(function() {
    var encryptedFlag = "àÒÆÞ¦È¬ëÙ£ÖÓÚåÛÑ¢ÕÓ¡ÒÅ¤í";
    var key = "picoctf";
    var decryptedFlag = "";
    for (var i = 0; i < encryptedFlag.length; i++) {
        decryptedFlag += String.fromCharCode((encryptedFlag.charCodeAt(i) - key.charCodeAt(i % key.length) + 256) % 256);
    }
    alert(decryptedFlag);
})();
```

## **Analyzing the Decryption Process**
1. The `encryptedFlag` is a string of non-ASCII characters.
2. The decryption process involves iterating over each character of `encryptedFlag`.
3. Each character undergoes a transformation using a repeating-key XOR-like approach:
   
   
   \[ decryptedChar = (encryptedChar - keyChar + 256) \mod 256 \]
   
   where:
   - `encryptedChar` is the ASCII value of the encrypted character.
   - `keyChar` is the ASCII value of the corresponding character in the key (`picoctf`), repeated cyclically.
   - The modulo operation ensures values stay within the valid ASCII range.
4. The decrypted characters are concatenated to form the final flag.

## **Decryption Process**
Using Python, we implemented the decryption process:

```python
# Given encrypted flag and key
encrypted_flag = "àÒÆÞ¦È¬ëÙ£ÖÓÚåÛÑ¢ÕÓ¡ÒÅ¤í"
key = "picoctf"

# Decrypt the flag
decrypted_flag = ""
for i in range(len(encrypted_flag)):
    decrypted_char = (ord(encrypted_flag[i]) - ord(key[i % len(key)]) + 256) % 256
    decrypted_flag += chr(decrypted_char)

print(decrypted_flag)
```

## **Extracted Flag**
After running the script, we obtain:

```
picoCTF{p@g3_turn3r_0148cb05}
```

## **Conclusion**
This challenge demonstrated basic cryptographic principles using a simple substitution method with a cyclic key. Understanding ASCII transformations and modulo arithmetic was key to solving the challenge efficiently.

